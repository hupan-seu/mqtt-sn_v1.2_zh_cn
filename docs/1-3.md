## 1. 更改和修订历史
### 1.1 版本1.0，2007年11月29日
- 初始版本

### 1.2 版本1.1，2008年6月5日
- 新功能：支持休眠设备

### 1.3 版本1.2，2011年5月20日
- 新功能：支持大于255个字节的消息长度
- 转发器封装的格式更改为Nicholas O'Leary提出的格式（nick oleary@uk.ibm.com）
- 添加了返回代码值“0x03已拒绝，不支持”
- 字段“ReturnCode”已添加到消息WILLTOPICRESP和WILLMSGRESP中

## 2. 简介
最近对无线传感器网络（WSN）的兴趣日益增加，无论是商业还是技术 从这个角度来看，由于其简单，低成本和易于部署。 这些网络可以用于不同的目的， 从测量和检测，到自动化和过程控制。 典型的WSN由大量的WSN组成 电池供电的传感器和执行器（SA），通常配备有限的存储和 处理能力。 由于SA节点的数量，这些设备无线通信是很重要的 通常非常大，并且有线基础设施的部署成本非常昂贵。 这样的 网络本质上是非常动态的：无线链路可能随时暂时中断，节点可能会失败 并经常更换。 在这种情况下，使用地址进行通信的传统方法 与个别节点可能成为一场噩梦。 应用程序驻留在固定网络上并且需要 与无线SA设备的交互需要管理和维护与大型设备通信的手段 节点数量。 在大多数情况下，他们不需要知道提供服务的设备的地址或身份 信息，但对数据的内容更感兴趣。 例如，资产跟踪应用程序更多 感兴趣的是某个资产的当前位置，而不是提供该资产的GPS接收器的网络地址 信息。 此外，若干应用可能对相同的传感器数据感兴趣，但出于不同的目的。 在这种情况下，SA节点将需要管理和维护具有多个应用程序的通信装置 在平行下。 这可能会超过简单和低成本SA设备的有限功能。  
另一个问题是所涉及的网络之间的寻址方案的差异。 例如， 基于TCP / IP的网络上的应用程序如何处理基于ZigBee R 1的SA设备的运行情况 无线网络？  
可以通过使用以数据为中心的通信方法来克服上述问题，其中 信息不是基于它们的网络地址而是作为它们的信号的函数传递给接收方 帐篷和兴趣。  
已经在企业网络中广泛使用的消息传递系统，主要是由于它们的可扩展性和 支持动态网络拓扑。 将企业发布/订阅系统扩展到WSN也可以实现 WSN无缝集成到企业网络中，从而使SA收集现场数据。  
可作为任何其他企业信息提供给所有应用程序，并允许从任何企业信息中控制SA 1 ZigBee是ZigBee Alliance在美国和/或其他国家/地区的商标。 其他公司，产品或服务名称可能是商标 或他人的服务商标。
企业应用。 这可以通过使用MQTT协议来实现，该协议是开放式的 轻量级发布/订阅协议，专为机器对机器和移动应用程序而设计。 它 优化用于带宽非常高的网络或网络连接的网络通信 可能是断断续续的。 但是，MQTT需要提供的底层网络，例如TCP / IP 有序的无损连接功能，这非常简单，占用空间小，成本低 无线SA等设备。 本文档的目的是指定MQTT-SN，一种用于无线传感器网络的发布/订阅协议。 MQTT-SN可以被视为MQTT的一个版本，它适应无线通信的特性。 环境。 无线无线电链路通常具有比有线无线电链路更高的故障率 易受衰落和干扰干扰。 它们的传输速率也较低。 例如， 基于IEEE 802.15.4标准的WSN在2.4GHz频带中提供250kbit / s的最大带宽。 而且，为了抵抗传输错误，它们的分组具有非常短的长度。 在IEEE的情况下 802.15.4，物理层的数据包长度限制为128字节。 可以采用这128个字节中的一半 远离MAC层，网络，安全等支持功能所需的开销信息。 MQTT-SN还针对具有有限处理的低成本电池供电设备进行了优化 和存储资源。 MQTT-SN最初开发用于在ZigBee R 1 APS层之上运行 。 ZigBee R 1是开放的 工业联盟旨在为无线传感器网络定义一个开放的全球通信标准。 成为 全局ZigBee R 1选择IEEE标准802.15.4作为PHY和MAC层的协议，以及 在此标准上增加了所需的网络，安全性和应用层，从而提供了互操作性 不同供应商的产品之间。 MQTT-SN的设计使其无法与底层网络服务相关联。 任何网络 它在任何节点和特定节点（网关）之间提供双向数据传输服务 能够支持MQTT-SN。 例如，允许源端点发送的简单数据报服务 到特定目标端点的数据消息应该足够了。 仅广播数据传输服务 如果采用网关发现过程则需要。 减少发现创建的广播流量 在程序中，期望MQTT-SN可以指示到底层的所需广播半径。  

## 3. MQTT-SN 与 MQTT 比较
MQTT-SN设计为尽可能接近MQTT，但适应无线通信的特性 通信环境，如低带宽，高链路故障，短消息长度等。它也进行了优化 用于在具有有限处理和存储资源的低成本电池供电设备上实施。 与MQTT相比，MQTT-SN具有以下不同之处：
1. CONNECT消息分为三条消息。 另外两个是可选的并且用于 将Will主题和Will消息传送到服务器。
2. 为了应对无线网络中的短消息长度和有限的传输带宽， PUBLISH消息中的主题名称由短的，双字节长的“主题ID”替换。 注册 过程定义为允许客户端向服务器/网关注册其主题名称并获取 相应的主题ID。 它也用于相反的方向，以通知客户端主题名称 以及将包含在以下PUBLISH消息中的相应主题ID。 
3. 引入了“预定义”主题ID和“简短”主题名称，无需注册。 预 定义的主题ID也是主题名称的两个字节长的替换，它们映射到主题名称 然而，客户端的应用程序和网关/服务器都预先知道。 因此双方 可以开始使用预定义的主题ID; 在“正常”主题ID的情况下，不需要注册 上文提到的。
4. 发现过程可帮助没有预先配置的服务器/网关地址的客户端发现实际情况 操作服务器/网关的网络地址。 多个网关可以同时存在于其中 单个无线网络，可以在负载共享或待机模式下协作。 
5. “清除会话”的语义扩展到了Will功能，即不仅仅是客户端的订阅 持久性，也会主题和意志消息。 客户端还可以修改其Will主题和Will消息 在一次会议期间。 
6. 为睡眠客户端的支持定义了一个新的离线保持活动过程。 通过这个程序， 电池供电的设备可以进入休眠状态，在该状态期间，所有发往它们的消息都被缓冲 在服务器/网关处，并在他们醒来后稍后交付给他们。