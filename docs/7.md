## 7 实施说明

### 7.1 支持QoS等级-1 

因为客户端可以随时发送QoS等级为-1的PUBLISH消息（即使没有建立连接），一个转发网关需要为这些消息维护与服务器的专用MQTT连接。 一个聚合或混合网关可以使用任何聚合MQTT连接将这些消息转发到服务器。  

### 7.2 定时器和计数器的“最佳实践”值 

表30显示了本规范中定义的定时器和计数器的“最佳实践”值。 

时间或次数 | 推荐值
---|--- 
Tadv | 大于15分钟
Nadv | 2-3
Tsearchgw | 5 秒
Tgwinfo | 5 秒
Twait | 大于5分钟
Tretry | 10-15秒
Nretry | 3-5

服务器或网关上的睡眠和保持活动计时器的“容差”取决于客户端指示的持续时间。例如，对于大于1分钟的持续时间，计时器值应比指示值高10％ ，小于1分钟的持续时间应增加50％。  

### 7.3 主题ID到主题名称的映射

强烈建议在网关中实现主题ID和主题名称之间的映射表，是每个客户端单独实现的（而不是所有客户端共享一个映射表），以减少来自某个客户端的错误的主题ID匹配了另一个客户端的有效主题ID的风险，从而导致发布错误的主题，这可能会带来灾难性的后果。  

### 7.4 ZigBee相关问题

- 在ZigBee网络中，网关不需要由协调节点托管。但它应该驻留在永远在线路由器节点中，以便能够随时接收客户端消息。 
- 由于ZigBee的网络或APS层的有效载荷长度较短，因此MQTT-SN消息的最大长度限制在60个字节。
